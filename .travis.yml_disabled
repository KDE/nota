sudo: required
services:
- docker
addons:
  apt:
    packages:
    - realpath
install:
- docker pull ubuntu:bionic
- wget https://raw.githubusercontent.com/nomad-desktop/nxos-repository-util/master/nxos-repository-util.sh
  -O nxos-repository-util.sh
- chmod +x nxos-repository-util.sh
script:
- docker run --rm -v $(pwd)/:/build/ -w /build/ ubuntu:bionic /bin/bash travis-build.sh
branches:
  only:
  - master
  - development
deploy:
- provider: script
  script: "./source/nxos-repository-util.sh upload testing *.deb"
  skip_cleanup: true
  on:
    branch: master
- provider: script
  script: "./source/nxos-repository-util.sh upload development *.deb"
  skip_cleanup: true
  on:
    branch: development
notifications:
  email: false
  slack:
    secure: DebxsLnRPjMc6i/OPyFMTGodLqhlU8wOGFIaiZoJXk3rO4A/dhhSlPgZ2KTYcTw+I6fam3m1lAICyX1PEP/cDGpPBW/oWrkpFt3C7zvvgdBqCcsGWViIZMxVsWWdhzUZzfZpXEWaVxQR+q+IBM3OFgUvU+cfiuU3ifbhY5w5SNkoP+w1TOcrFN0EMcIPLAKIJJ49jtAQVw0axt4iA94GSSUA86u4GkqdFKkh+ndo9HE10cpc1D1de3Vsk+r+UMGy+RcyXueyax5i7jxJaP0GDGVk5lUN/Urjzcbg39Px0ZDu9K/sr9CHBzNDcfuWPwmpMcBF016ieti08GzQp7/sc2IWIfF7dFWZ6ywazsmHy7l/UC+afaVtCNrLAq/OUHMzVswBskCK0pvI7B8kIEld6ZoR4As04XQ2tAyvpB9aESYATsvwiYlBctIXSGBMkbbVi1IZn0vEOgQocMTNclI1J1dgEjRO/mJTtez1nehqEjNtptPLAzgFidxxGo+JYM4bSyVSZsGTNL6SDbrDDYKyy8pgJ6GJaOvr0pDG8eqmygOTapHqIbpcipyvxkad5eK3VQXUf3z64y3qctI++wcJebr+O1ATQ5K5/9jZyxhbpgNhzydfe1D4uZHFXUwJzBJFnNKvkzBw8y7HY0rDbD/+AbcrzlJdhJOicR9RPs+dTks=
env:
  global:
  - secure: orE2B/soKBkfNqm/xLDffjGZewCvkSFx55AQoiGrbNhTjkL9a52rVIlqwcvDfmG9xAwdJkoXjssLNJfG3sbWYeUQ09guHFwjypXLAg14TZUKhMhMEW6Lei9b1zpH5A3+Ve/jyBoQIM3dJkuKM3DsO9pwtdAFho3Z7Gs85FDQPA9Wd4W//8QHBSAFvgyP7GcUvVihj7+eKOlrUDtjdDlpfn8T8GcGfSclB5sPD6Lovj+lYTDTcF2kiiB2YYDsckRSBZ9iq8kwUdC2LmabN1yHUX8lrfQFDbWricZ5kPiQruQU92pjtrJS57UINvtYpxb4b/wgDPZ/j5bn/WIQeXEyrCW2hbDZJmd9TzK+z4SGaLao7dfxgsDbstrarJia6K16UQSoY3uC3qXSIr4853OgJxxRjEyJQ3ihPbjccm5SnRLSoEDdhMQRUZcUBRBB+A334m2Ui+YjByKE/7uiv6thGKErHKvIhWTDKOgzJEZAz92lCF02iLmaRQHZq8ZzjU8u6RhbGzLHguW9bRqF/2dVeVzM5il62qnZQfrxUE6JvpQzBZEGRPGGhW7xgEd2ZwQRGY/eytm2Bhh6Cv9pFFNHLOr3NmvHsP878X8jHgEgqDnyNpw3VXRKUphRgGq3jZnRNCweSANueKHnLAz+MXfbjPOJMDPC6hrXIoUuVg141ys=
  - secure: 0y+2yOurKQfqXEgX8Xlo4b/f166mQdvVjdGm4MdORH12tO5ZQ8eAjcFz8Pa/2sIaiQt+IS60Ub9e7RwLsThXrULiBnXlFq4ljm4h+55+EPJ8m08mbHW2gxio0fjir4XwrvrSL7lM3rTb0iNVWkAnUjvq29g3d810QgEDHd0ktaM5MX6N4eBehac2ZzKXWbQ2OIsHH0SPRZEDJFdQMG9AUknlL6lZXKx1emGMcBsNBTq/BF0uq75QJWWScODHHVFI46GttUVxVzlY0aG47ooHsOo4ej6A4qgLpScG+7s6prWIVuo47yiYQJu4QghXT6cKFqOqPSQ5BLqfnefI2SiFw4KZegSMf4127/das021PiNvx5/9CPto2T1h4pD0CKzVYs+Gk83I1k/x26Y9j8aiCRPHcYL0Cxa22gIpG6he3/Sb9gfjFFtaHfFUrUtOCNX8V2M1pnXPd5Pl0LCx7wmjMZam2nEztLgbMmbSG2AlPvV+DYRmFQqv2Vby8YMaR9wTC7a+BwUAd9at+3wW8BXe+blUW+UTpnKSK4ltUHqH7wvjGgVa9Y7mR9vtDvegmKA5Vq3ja0YgGcc3vwWYE9JtYKj+nvSbm3uJZuaDjpLVKHSK4e0bcT9mtB1WmrvPQL47DMeF/+UPDOE1YqpctgSgrQRKco7t5kjqQoABr6XBs+M=
