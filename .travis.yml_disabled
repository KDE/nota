sudo: required
services:
- docker
addons:
  apt:
    packages:
    - realpath
install:
- docker pull ubuntu:bionic
- wget https://raw.githubusercontent.com/nomad-desktop/nxos-repository-util/master/nxos-repository-util.sh
  -O nxos-repository-util.sh
- chmod +x nxos-repository-util.sh
script:
- docker run --rm -v $(pwd)/:/build/ -w /build/ ubuntu:bionic /bin/bash travis-build.sh
branches:
  only:
  - master
  - development
deploy:
- provider: script
  script: "./source/nxos-repository-util.sh upload testing *.deb"
  skip_cleanup: true
  on:
    branch: master
- provider: script
  script: "./source/nxos-repository-util.sh upload development *.deb"
  skip_cleanup: true
  on:
    branch: development
notifications:
  email: false
  slack:
    secure: X4UYgvaH3aOLMx28ITp8VWmJWoDAXczod+LAOEnK9CEpnE8NV/h+gvscxtKls8q4vaJja0s7Nj3+jJhY7I3vL/RrQJgATDK76epHZLbkyRp3sDAwXLsvK0Q73HVOX9P8vLcJUOoxPlgb6tgAkU6N1+O2fWo4r53/ig9gg1vM0yyJAps1pGjhl9Sta0eaZ5FvbN3i+5yLpfnXFFtSO3NPID51Ze8/SI7Eqkbg2M3D8yIWgLIZ4fOa824Sitf8Vgn+ffEGy7uXEPqMEzMwxqnpFTcWNiRIqBG0VAnJiW1aMYmf3heDec7UVKck01+p76NQOGL1Px/CHQ39eUPvmqpoBlsTTmncWkKvCVjFRVCdMCdA1iLnM0hIgcRtVJ8YqMc+ndsUvjg0A3NAFhOABcWTu9yuRPvd0ysDC6HKTwEOB4WaMGk+60ZR/gmV4Hft4dooS9IGN4sdggpxT/L2+is2AdKZujgMo3ITDeDNCzjRDLQyJ418by6A4tgJYbIUDVfcdSFjfVEXbN0n+4D6wG3BuXF4LLO0CYRG3m41XGTbpgenq/8kf7G5DBnLNwOaJOFe8K2a70yiQxSxYp4PMD0NRppMz2iAaPFkPq2AF1OjTLld5l7dsHuC+Pd4wcuLh7E7+4ZLVfwmP3gVkqf9zUKRwp5OkSc+c5S7o+hP+DXTgtg=
env:
  global:
  - secure: orE2B/soKBkfNqm/xLDffjGZewCvkSFx55AQoiGrbNhTjkL9a52rVIlqwcvDfmG9xAwdJkoXjssLNJfG3sbWYeUQ09guHFwjypXLAg14TZUKhMhMEW6Lei9b1zpH5A3+Ve/jyBoQIM3dJkuKM3DsO9pwtdAFho3Z7Gs85FDQPA9Wd4W//8QHBSAFvgyP7GcUvVihj7+eKOlrUDtjdDlpfn8T8GcGfSclB5sPD6Lovj+lYTDTcF2kiiB2YYDsckRSBZ9iq8kwUdC2LmabN1yHUX8lrfQFDbWricZ5kPiQruQU92pjtrJS57UINvtYpxb4b/wgDPZ/j5bn/WIQeXEyrCW2hbDZJmd9TzK+z4SGaLao7dfxgsDbstrarJia6K16UQSoY3uC3qXSIr4853OgJxxRjEyJQ3ihPbjccm5SnRLSoEDdhMQRUZcUBRBB+A334m2Ui+YjByKE/7uiv6thGKErHKvIhWTDKOgzJEZAz92lCF02iLmaRQHZq8ZzjU8u6RhbGzLHguW9bRqF/2dVeVzM5il62qnZQfrxUE6JvpQzBZEGRPGGhW7xgEd2ZwQRGY/eytm2Bhh6Cv9pFFNHLOr3NmvHsP878X8jHgEgqDnyNpw3VXRKUphRgGq3jZnRNCweSANueKHnLAz+MXfbjPOJMDPC6hrXIoUuVg141ys=
  - secure: 0y+2yOurKQfqXEgX8Xlo4b/f166mQdvVjdGm4MdORH12tO5ZQ8eAjcFz8Pa/2sIaiQt+IS60Ub9e7RwLsThXrULiBnXlFq4ljm4h+55+EPJ8m08mbHW2gxio0fjir4XwrvrSL7lM3rTb0iNVWkAnUjvq29g3d810QgEDHd0ktaM5MX6N4eBehac2ZzKXWbQ2OIsHH0SPRZEDJFdQMG9AUknlL6lZXKx1emGMcBsNBTq/BF0uq75QJWWScODHHVFI46GttUVxVzlY0aG47ooHsOo4ej6A4qgLpScG+7s6prWIVuo47yiYQJu4QghXT6cKFqOqPSQ5BLqfnefI2SiFw4KZegSMf4127/das021PiNvx5/9CPto2T1h4pD0CKzVYs+Gk83I1k/x26Y9j8aiCRPHcYL0Cxa22gIpG6he3/Sb9gfjFFtaHfFUrUtOCNX8V2M1pnXPd5Pl0LCx7wmjMZam2nEztLgbMmbSG2AlPvV+DYRmFQqv2Vby8YMaR9wTC7a+BwUAd9at+3wW8BXe+blUW+UTpnKSK4ltUHqH7wvjGgVa9Y7mR9vtDvegmKA5Vq3ja0YgGcc3vwWYE9JtYKj+nvSbm3uJZuaDjpLVKHSK4e0bcT9mtB1WmrvPQL47DMeF/+UPDOE1YqpctgSgrQRKco7t5kjqQoABr6XBs+M=
